function [ABS,F] = plotfft(s, NFFT, Fs, margin)

% s is input data
% NFFT is the FFT length
% Fs is the sample rate
% plotfft?¥å????å¤???ä¸?è¾??¥å???°ï?s??è¾??¥æ?°æ??ï¼?NFFT??FFT???¿åº¦ï¼?Fs?????·ç??;

narginchk(1,4);
% narginchk ?½æ?°æ??¥è??? plotfft ?¶æ??ä¾??????°æ?°é???????? 1 ?? 4 ä¹???

if nargin == 3
    margin = [-Fs/2 Fs/2];
elseif nargin == 2
    Fs = 1;
    margin = [-Fs/2 Fs/2];
elseif nargin == 1
    Fs = 1;
    margin = [-Fs/2 Fs/2];
%     NFFT = max(length(s), 1024);
    NFFT = max(length(s), 128);
end


if isempty(NFFT)
    %NFFT = max(2^10, 2^(round(log(length(s))/log(2))+1));  % 1024
    NFFT = max(2^7, 2^(round(log(length(s))/log(2))+1));  % 128
end


L = NFFT;
F = (Fs/L) *(-L/2 : L/2-1);
ABS = (fftshift(fft(s,L),1))';

% ?½æ?°è????? ABS ?? FFT ??å¹?åº?è°?
% F ??å¯¹å???é¢???è½?
% fft(s,L) å¯¹ä¿¡?? s è¿?è¡??¿åº¦ä¸? L ?? FFT
% fftshift(...,1) å°? FFT ???¶é?????ç§»å?¨å?°é?è°±ä¸­å¿?


